<html>
<head>
    <title>Choroplethe_time_Cas Covid19</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link href="default.css" rel="stylesheet" type="text/css" media="all" />
    <link href="fonts.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" type="text/css">
    <link rel="stylesheet" href="leaflet.css" />
    <script src="leaflet.js"></script>
    <script src="Mes_provinces.geojson"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    </head>

    <style>
        #map {
            width: 600px;
            height: 400px;
        }
        .info {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }
        .info h4 {
            margin: 0 0 5px;
            color: #777;
        }       
             
        .legend { 
            text-align: left; 
            line-height: 18px; 
            color: #555; 
        } 
        .legend i { 
        width: 18px; 
        height: 18px; 
        float: left; 
        margin-right: 8px; 
        opacity: 0.7; 
        }
        body{ background-color: #f7f1ee;}
        h1{
            text-align: center;
            text-size-adjust: 20px;
            color: #7a0177;
            
        }
        h3{text-align: center;
            color: #c51b8a;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            line-height: 0cm;
        }

                                             
    </style>
</head>
<body>
    <h1>Le nombre des nouveaux cas de COVID 19 dans la Région Beni Mellal Khénifra</h1>
    <h3>Du 13/12/2021 au 19/12/2021</h3>
<div id="wrapper">
        <div id="mapid" style="width: 1350px; height: 560px;">
        <div class="leaflet-top leaflet-right"><div class="info leaflet-control">
        <script src="SliderControl.js"></script>
            <script>
            var sliderControl = null;
                var mymap = L.map('mapid').setView([32.5, -6], 8);
               

        // get color depending on COVID contaminations value 
                function getColor(attribut) {
                    return attribut > 6 ? '#756bb1' :
                           attribut > 4 ? '#9e9ac8' :
                           attribut > 2 ? '#bcbddc' :
                           attribut > 0 ? '#dadaeb' :
                                     '#f2f0f7';
                }

                function style7(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.dixneuf_dec)
                    };
                }    

                function style6(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.dixhuit_dec)
                    };
                }    

                function style5(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.dixsept_dec)
                    };
                }    

                function style4(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.seize_dec)
                    }; 
                }    

                function style3(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.quinze_dec)
                    };
                }    

                function style2(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.quatorze_dec)
                    };
                }    

                function style1(feature) {
                    return {
                        weight: 1,
                        opacity: 0.5,
                        color: 'black',
                        dashArray: '4',
                        fillOpacity: 0.7,
                        fillColor: getColor(feature.properties.treize_dec)
                    };
                }  
                
                       

                function highlightFeature(t) {
                    var layer = t.target;

                    layer.setStyle({
                        weight: 6,
                        color: '#22222d',
                        dashArray: '',
                        fillOpacity: 1
                    });

                    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                        layer.bringToFront();
                    }
                        info.update(layer.feature.properties);

                } 

                var geojson1;

                function resetHighlight1(e) {
                    geojson1.resetStyle(e.target);
                    info.update();
                   
    
                }
                
                var geojson2;

                function resetHighlight2(e) {
                    geojson11.resetStyle(e.target);
                    info.update();
                                
                }
                
                var geojson3;

                function resetHighlight3(e) {
                    geojson12.resetStyle(e.target);
                    info.update();
                           
                }
                var geojson4;
                function resetHighlight4(e) {
                    geojson13.resetStyle(e.target);
                    info.update();
                           
                }
                var geojson5;

                function resetHighlight5(e) {
                    geojson14.resetStyle(e.target);
                    info.update();
                              
                }
                var geojson6;

                function resetHighlight6(e) {
                    geojson15.resetStyle(e.target);
                    info6.update();
                }                
                var geojson7;
                function resetHighlight7(e) {
                    geojson16.resetStyle(e.target);
                    info.update();
                    
                 
                }
                function zoomToFeature(e) {
                    mymap.fitBounds(e.target.getBounds());

                }
                function onEachFeature1(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight1,
                        click: zoomToFeature
                    });
                }   

                function onEachFeature2(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight2,
                        click: zoomToFeature
                    });
                } 

                function onEachFeature3(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight3,
                        click: zoomToFeature
                    });
                }
                function onEachFeature4(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight4,
                        click: zoomToFeature
                    });
                }

                function onEachFeature5(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight5,
                        click: zoomToFeature
                    });
                }

                function onEachFeature6(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight6,
                        click: zoomToFeature
                    });
                }

                function onEachFeature7(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight7,
                        click: zoomToFeature
                    });
                }
                


                geojson1 = L.geoJson(Mes_provinces,{style: style1, onEachFeature: onEachFeature1, time: "13-12-2021"
                        }
                );
                geojson2 = L.geoJson(Mes_provinces,{style: style2, onEachFeature: onEachFeature2, time: "14-12-2021"
                        }
                );
                geojson3 = L.geoJson(Mes_provinces,{style: style3, onEachFeature: onEachFeature3, time: "15-12-2021"
                        }
                );
                geojson4 = L.geoJson(Mes_provinces,{style: style4, onEachFeature: onEachFeature4, time: "16-12-2021"
                        }
                );
                geojson5 = L.geoJson(Mes_provinces,{style: style5, onEachFeature: onEachFeature5, time: "17-12-2021"
                        }
                );
                geojson6 = L.geoJson(Mes_provinces,{style: style6, onEachFeature: onEachFeature6, time: "18-12-2021"
                        }
                );
                geojson7 = L.geoJson(Mes_provinces,{style: style7, onEachFeature: onEachFeature7, time: "19-12-2021"
                        }
                );
               
    
                 
               
            
                layerGroup = L.layerGroup([geojson1,geojson2, geojson3, geojson4, geojson5, geojson6, geojson7]);
                var sliderControl = L.control.sliderControl({layer:layerGroup, follow: true});
                mymap.addControl(sliderControl);
                sliderControl.startSlider();

                var info = L.control();

                info.onAdd = function (map) {
                   this._div = L.DomUtil.create('div', 'info');
                   this.update();
                   return this._div;
                };

                info.update = function (props) {
                    this._div.innerHTML = (props ?
                        'Province  : <b>' + props.NAME + '</sup>'
                        : 'Merci de mettre le cursuer sur la region');
                };

                info.addTo(mymap);

                  



                var legend = L.control({position: 'bottomright'});

                legend.onAdd = function (mymap) {
                    var div = L.DomUtil.create('div', 'info legend');
                    var grades = [0, 2, 4, 6];
                    var labels = [];
                    var from, to;

                    for (var i = 0; i < grades.length; i++) {
                        from = grades[i];
                        to = grades[i + 1];
            
                        labels.push(
                               '<i style="background:' + getColor(from + 1) + '"></i> ' +
                               from + (to ? '&ndash;' + to : '+'));
                    }

                div.innerHTML = labels.join('<br>');
                return div;
                };

                legend.addTo(mymap);

            </script>

</body>
</html>